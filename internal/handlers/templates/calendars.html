{{define "title"}}Night Routine - Calendar Selection{{end}}

{{define "content"}}
<div class="mb-8">
    <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2">Select Calendar</h2>
    <p class="text-slate-600 text-lg">Choose which calendar to use for night routine events</p>
</div>

<div class="flex flex-col gap-4">
    {{range .Calendars.Items}}
    <div
        class="bg-white rounded-2xl shadow-lg p-6 border-2 transition-all duration-200 hover:shadow-xl
            {{if eq .Id $.Selected}}border-emerald-400 bg-linear-to-br from-emerald-50 to-green-50{{else}}border-slate-200 hover:border-indigo-300{{end}}">
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
            <div class="flex-1">
                <div class="flex items-center gap-3 mb-2">
                    {{if eq .Id $.Selected}}
                    <span class="text-2xl">âœ“</span>
                    {{else}}
                    <span class="text-2xl">ðŸ“…</span>
                    {{end}}
                    <h3 class="text-xl font-bold text-slate-900 wrap-break-word">{{.Summary}}</h3>
                </div>
                {{if .Description}}
                <p class="text-slate-600 mb-2 ml-11">{{.Description}}</p>
                {{end}}
                {{if .AccessRole}}
                <div class="flex items-center gap-2 ml-11">
                    <span class="bg-indigo-100 text-indigo-700 text-xs font-semibold px-3 py-1 rounded-full">
                        {{.AccessRole}}
                    </span>
                </div>
                {{end}}
            </div>
            <form method="POST" action="/calendars" class="w-full lg:w-auto">
                <input type="hidden" name="calendar_id" value="{{.Id}}">
                <input type="hidden" name="calendar_name" value="{{.Summary}}">
                <button type="submit"
                    class="w-full lg:w-auto py-3 px-6 rounded-xl font-semibold transition-all duration-200
                        {{if eq .Id $.Selected}}bg-slate-300 text-slate-600 cursor-not-allowed{{else}}bg-indigo-500 hover:bg-indigo-600 text-white hover:shadow-lg hover:scale-105{{end}}"
                    {{if eq .Id $.Selected}}disabled{{end}}>
                    {{if eq .Id $.Selected}}âœ“ Currently Selected{{else}}Select Calendar{{end}}
                </button>
            </form>
        </div>
    </div>
    {{end}}
</div>
{{end}}